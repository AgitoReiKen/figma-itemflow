window.onload=()=>{const s=`
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <line x1="2" y1="12" x2="22" y2="12" stroke="currentColor" stroke-width="4"></line>
            </svg>
        `,r=`
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M22 12L14 18L14 6L22 12Z" fill="currentColor"></path>
            <line x1="14" y1="12" x2="2" y2="12" stroke="currentColor" stroke-width="4"></line>
            </svg>
        `,e=document.getElementById("strokecap0-switch"),t=document.getElementById("strokecap1-switch");e.setAttribute("capType","NONE"),e.innerHTML=s,t.setAttribute("capType","ARROW_EQUILATERAL"),t.innerHTML=r,e.onclick=()=>{const e=[{id:"NONE",icon:s},{id:"ARROW_EQUILATERAL",icon:`
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M2 12L10 6V18L2 12Z" fill="currentColor"></path>
            <line x1="10" y1="12" x2="22" y2="12" stroke="currentColor" stroke-width="4"></line>
            </svg>
        `}],t=document.getElementById("strokecap0-switch"),n=t.getAttribute("capType");var o=e.findIndex(e=>e.id===n),o=o+1>=e.length?0:o+1;t.setAttribute("capType",e[o].id),t.innerHTML=e[o].icon;o=[e[o].id,null];parent.postMessage({pluginMessage:{type:"set-stroke-cap",value:o}},"*")},t.onclick=()=>{const e=[{id:"NONE",icon:s},{id:"ARROW_EQUILATERAL",icon:r}],t=document.getElementById("strokecap1-switch"),n=t.getAttribute("capType");var o=e.findIndex(e=>e.id===n),o=o+1>=e.length?0:o+1;t.setAttribute("capType",e[o].id),t.innerHTML=e[o].icon;o=[null,e[o].id];parent.postMessage({pluginMessage:{type:"set-stroke-cap",value:o}},"*")},document.getElementById("bezier-switch").setAttribute("checked","true"),document.getElementById("bezier-switch").onclick=()=>{const e=document.getElementById("bezier-switch");var t=e.hasAttribute("checked");t?e.removeAttribute("checked"):e.setAttribute("checked","true"),parent.postMessage({pluginMessage:{type:"set-bezier",value:!t}},"*")},document.getElementById("enable-switch").setAttribute("checked","true"),document.getElementById("enable-switch").onclick=()=>{const e=document.getElementById("enable-switch");var t=e.hasAttribute("checked");t?e.removeAttribute("checked"):e.setAttribute("checked","true"),parent.postMessage({pluginMessage:{type:"set-enabled",value:!t}},"*")},document.getElementById("update-switch").setAttribute("checked","true"),document.getElementById("update-switch").onclick=()=>{const e=document.getElementById("update-switch");var t=e.hasAttribute("checked");t?e.removeAttribute("checked"):e.setAttribute("checked","true"),parent.postMessage({pluginMessage:{type:"set-update",value:!t}},"*")},document.getElementById("lock-switch").setAttribute("checked","true"),document.getElementById("lock-switch").onclick=()=>{const e=document.getElementById("lock-switch");var t=e.hasAttribute("checked");t?e.removeAttribute("checked"):e.setAttribute("checked","true"),parent.postMessage({pluginMessage:{type:"set-framelocked",value:!t}},"*")};for(let r=1;r<6;r++)document.getElementById(`stroke-color-${r}`).onclick=()=>{const o=document.getElementById(`stroke-color-${r}`),s=o.getAttribute("color");!function(){for(let e=1;e<6;e++){const n=document.getElementById(`stroke-color-${r}`);var t=n.getAttribute("color");s!==t&&o.removeAttribute("checked")}}(),o.setAttribute("checked","true"),document.getElementById("stroke-color-hex").value=s,document.getElementById("stroke-color").value=s,parent.postMessage({pluginMessage:{type:"set-color",value:s}},"*")};document.getElementById("stroke-opacity").onchange=()=>{const e=document.getElementById("stroke-opacity");var t=e.value.replace("%","");let n=0;n=parseFloat(t),isNaN(n)?(n=100,e.value="100%"):(100<n&&(n=100),n<0&&(n=0),e.value=`${n.toFixed(0)}%`),parent.postMessage({pluginMessage:{type:"set-color-opacity",value:n/100}},"*")},document.getElementById("stroke-color").onchange=()=>{var t=document.getElementById("stroke-color")["value"];for(let e=1;e<6;e++){const n=document.getElementById(`stroke-color-${e}`);t===n.getAttribute("color")?n.setAttribute("checked","true"):n.removeAttribute("checked")}document.getElementById("stroke-color-hex").value=t,parent.postMessage({pluginMessage:{type:"set-color",value:t}},"*")},document.getElementById("stroke-color-hex").onchange=()=>{const e=document.getElementById("stroke-color-hex");e.value=function(e){function t(e,t,n=2){return parseInt(t.substr(e,n),16)}if(2===(e=!e.startsWith("#")?`#${e}`:e).length){const o=parseInt(e.substr(1,1),16);if(!isNaN(o)){let t="#";var n=o.toString(16).toUpperCase();for(let e=0;e<6;e++)t+=n;return t}}if(3===e.length){const s=t(1,e);if(!isNaN(s)){let e=s.toString(16).toUpperCase();return 1===e.length&&(e+="0"),`#${e}${e}${e}`}}if(4===e.length){const r=t(1,e),l=t(3,e,1);if(!isNaN(r)&&!isNaN(l)){let e=r.toString(16).toUpperCase(),t=l.toString(16).toUpperCase();return 1===e.length&&(e+="0"),1===t.length&&(t+="0"),`#${e}${t}${t}`}}else if(5===e.length){const c=t(1,e),a=t(3,e);if(!isNaN(c)&&!isNaN(a)){let e=c.toString(16).toUpperCase();1===e.length&&(e+="0");let t=a.toString(16).toUpperCase();return 1===t.length&&(t+="0"),`#${e}${t}00`}}else if(6<=e.length){const i=t(1,e),u=t(3,e),g=t(5,e);if(!isNaN(i)&&!isNaN(u)&&!isNaN(g)){let e=i.toString(16).toUpperCase();1===e.length&&(e+="0");let t=u.toString(16).toUpperCase();1===t.length&&(t+="0");let n=g.toString(16).toUpperCase();return 1===n.length&&(n+="0"),`#${e}${t}${n}`}}return"#000000"}(e.value);const t=document.getElementById("stroke-color");t.value!==e.value&&(t.value=e.value),parent.postMessage({pluginMessage:{type:"set-color",value:e.value}},"*")},document.getElementById("stroke-weight").onchange=()=>{const e=document.getElementById("stroke-weight");0===e.value.length&&(e.value="1"),parent.postMessage({pluginMessage:{type:"set-stroke-weight",value:parseInt(e.value,10)}},"*")},document.getElementById("dash-pattern").onchange=()=>{const e=document.getElementById("dash-pattern");0===e.value.length&&(e.value="0"),parent.postMessage({pluginMessage:{type:"set-dash-pattern",value:parseInt(e.value,10)}},"*")},document.getElementById("dash-pattern-switch").onclick=()=>{const e=document.getElementById("dash-pattern-switch"),t=document.getElementById("dash-pattern");var n;e.hasAttribute("value")?(n=e.getAttribute("value"),"0"===t.value?t.value=n:(t.value===n||e.setAttribute("value",t.value),t.value="0")):"0"!==t.value&&(e.setAttribute("value",t.value),t.value="0"),parent.postMessage({pluginMessage:{type:"set-dash-pattern",value:parseInt(t.value,10)}},"*")},document.getElementById("github-link").onclick=()=>{window.open("https://github.com/AgitoReiKen/figma-itemflow")},parent.postMessage({pluginMessage:{type:"init"}},"*")};