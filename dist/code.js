(()=>{"use strict";var e={480:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=n(154),s=a(n(154));figma.showUI(__html__),figma.ui.resize(300,330),s.Enable(),s.GetPluginFrame().locked=!0,figma.on("close",(()=>{s.Disable(),figma.closePlugin()})),figma.ui.onmessage=e=>{switch(e.type){case"set-stroke-weight":s.flowSettings.weight=parseInt(e.value,10);break;case"set-stroke-cap":null!==e.value[0]&&(s.flowSettings.strokeCap[0]=e.value[0]),null!==e.value[1]&&(s.flowSettings.strokeCap[1]=e.value[1]);break;case"set-color":{const t=function(e,t){return parseFloat((parseInt(t.substr(e,2),16)/255).toPrecision(3))};s.flowSettings.color.r=t(1,e.value),s.flowSettings.color.g=t(3,e.value),s.flowSettings.color.b=t(5,e.value);break}case"set-color-opacity":s.flowSettings.color.a=e.value;break;case"set-dash-pattern":{const t=parseInt(e.value,10);s.flowSettings.dashPattern=[t,t];break}case"set-bezier":s.flowSettings.bezier=e.value;break;case"set-enabled":e.value?s.EnableFlowEvents():s.DisableFlowEvents();break;case"set-update":e.value?s.EnableFlowUpdate():s.DisableFlowUpdate();break;case"set-framelocked":(0,r.GetPluginFrame)().locked=e.value}}},154:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DisableFlowUpdate=t.EnableFlowUpdate=t.DisableFlowEvents=t.EnableFlowEvents=t.CreateFlow=t.Disable=t.Enable=t.GetPluginFrame=t.flowSettings=t.FlowSettings=void 0;const i=n(522),a=o(n(634)),r=o(n(464)),s="ItemFrame",l=s,c="undefined",u=new r.default(-99999,-99999);let f=c;function d(){let e;if(f!==c){const t=figma.currentPage.children.length;if(t>1){const n=figma.currentPage.children[t-1];if(n.id===f)return e=n,e}e=figma.currentPage.findOne((e=>e.id===f))}else e=figma.currentPage.findOne((e=>"1"===e.getPluginData(l)));if(null===e){const t=figma.createFrame();t.locked=!0,t.setPluginData(l,"1"),e=figma.currentPage.findOne((e=>"1"===e.getPluginData(l))),f=e.id,h()}else f=e.id;return e}function h(){const e=d();figma.currentPage.insertChild(figma.currentPage.children.length,e),e.resize(1,1),e.x=u.x,e.y=u.y,e.name=s,e.clipsContent=!1}t.GetPluginFrame=d;class g{constructor(e,t,n,o){console.assert(e<=1&&t<=1&&n<=1&&o<=1),this.r=e,this.g=t,this.b=n,this.a=o}}class p{constructor(){this.strokeCap=["NONE","ARROW_EQUILATERAL"],this.dashPattern=[],this.weight=1,this.color=new g(0,0,0,1),this.bezier=!0}}t.FlowSettings=p;const m=new p;t.flowSettings=m;class b{constructor(){this.nodesAbsoluteTransform=[]}}function v(e){const t=e.getPluginData("IFS");return 0!==t.length?JSON.parse(t):null}function w(e){const t=e.getPluginData("IF");return 0!==t.length?JSON.parse(t):[]}function S(e){d().findChildren((t=>{const n=w(t);return 2===n.length&&void 0!==n.find((t=>t===e.id))})).forEach((e=>e.remove()))}function y(){return d().findChildren((e=>2===w(e).length))}function P(e,t,n,o){const i=new r.default(t.absoluteTransform[0][2],t.absoluteTransform[1][2]),s=new r.default(n.absoluteTransform[0][2],n.absoluteTransform[1][2]),l=function(e){const t=e.getPluginData("IFC");return 0!==t.length?JSON.parse(t):null}(e);let c=!0;if(null!==l&&(c=l.nodesAbsoluteTransform[0].x!==i.x||l.nodesAbsoluteTransform[0].y!==i.y||l.nodesAbsoluteTransform[1].x!==s.x||l.nodesAbsoluteTransform[1].y!==s.y),o||c){const o=a.default.GetClosestSnapPoints(t,n),r=o[0].x-o[1].x,l=o[0].y-o[1].y,c=o[0].x-r-u.x,f=o[0].y-l-u.y;if(e.x=c,e.y=f,v(e).bezier){const t=[0,0],n=[0,0],i=.5*l,a=.5*r;"right"!==o[0]._type&&"left"!==o[0]._type||(t[1]=a,n[1]=l),"top"!==o[0]._type&&"bottom"!==o[0]._type||(t[1]=r,n[1]=i),"right"!==o[1]._type&&"left"!==o[1]._type||(t[0]=a,n[0]=0),"top"!==o[1]._type&&"bottom"!==o[1]._type||(t[0]=0,n[0]=i),e.vectorPaths=[{windingRule:"EVENODD",data:`M 0 0 C ${t[0]} ${n[0]} ${t[1]} ${n[1]} ${r} ${l}`}]}else e.vectorPaths=[{windingRule:"EVENODD",data:`M 0 0 L ${r} ${l}`}];!function(e){const t=v(e);!function(e,t,n){const o=JSON.parse(JSON.stringify(e.vectorNetwork));"strokeCap"in o.vertices[o.vertices.length-1]&&(o.vertices[o.vertices.length-1].strokeCap=t,o.vertices[0].strokeCap=n),e.vectorNetwork=o}(e,t.strokeCap[0],t.strokeCap[1]),e.dashPattern=t.dashPattern,e.strokeWeight=t.weight;const n=JSON.parse(JSON.stringify(e.strokes));n[0].color.r=t.color.r,n[0].color.g=t.color.g,n[0].color.b=t.color.b,n[0].opacity=t.color.a,e.strokes=n}(e);const d=new b;d.nodesAbsoluteTransform=[i,s],function(e,t){e.setPluginData("IFC",JSON.stringify(t))}(e,d),e.name=`${t.name} -> ${n.name}`}}function O(e,t=!1){const n=w(e),o=figma.getNodeById(n[0]),i=figma.getNodeById(n[1]);null===o||null===i?e.remove():(o.removed&&S(o),i.removed&&S(i),i.removed||o.removed||P(e,o,i,t))}function _(e,t,n){let o=null;var i,a;o=function(e,t){return figma.currentPage.findOne((n=>{const o=w(n);return 2===o.length&&o[0]===e.id&&o[1]===t.id}))}(e,t),null===o&&(o=figma.createVector(),d().appendChild(o)),function(e,t){e.setPluginData("IFS",JSON.stringify(t))}(o,n),i=o,a=[e.id,t.id],i.setPluginData("IF",JSON.stringify(a)),O(o,!0)}t.CreateFlow=_;let x=-1,M=-1,I=-1,F=!1,k=!1;function E(e=50,t=!1){e<50&&(e=50),(t||k)&&(-1!==x&&clearInterval(x),x=setInterval((()=>{k&&y().forEach((e=>{O(e)}))}),e))}function D(){F=!0,(0,i.SetOnSelectionChanged)((e=>{2===e.length&&_(e[0],e[1],m)})),(0,i.SetOnSelectionItemAdded)((e=>{e.id===d().id&&(figma.currentPage.selection=[])})),(0,i.SetOnSelectionItemRemoved)((e=>{null!==e&&e.removed&&S(e)}))}function C(){F=!1,(0,i.SetOnSelectionChanged)((e=>{})),(0,i.SetOnSelectionItemAdded)((e=>{})),(0,i.SetOnSelectionItemRemoved)((e=>{}))}function N(){k=!0,E(y().length,!0),I=setInterval((()=>{k&&E(y().length)}),1e4)}function T(){k=!1,-1!==I&&(clearInterval(I),I=-1),-1!==x&&(clearInterval(x),x=-1)}t.EnableFlowEvents=D,t.DisableFlowEvents=C,t.EnableFlowUpdate=N,t.DisableFlowUpdate=T,t.Enable=function(){M=setInterval((()=>{F&&h()}),1e3),D(),N()},t.Disable=function(){-1!==M&&(clearInterval(M),M=-1),C(),T()}},522:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateSelection=t.GetSelection=t.SetOnSelectionItemRemoved=t.SetOnSelectionItemAdded=t.SetOnSelectionChanged=void 0;let n,o,i,a=[];function r(){const{selection:e}=figma.currentPage,t=a.length,r=[];a.length>e.length?(a.forEach(((t,n)=>{void 0!==e.find(((e,n)=>t.id===e.id))&&r.push(t)})),r.forEach((e=>{o(e)})),a=r):a.length<e.length?e.forEach(((e,t)=>{void 0!==a.find(((t,n)=>e.id===t.id))||(a.push(e),i(e))})):e.length===a.length&&1===e.length&&e[0].id!==a[0].id&&(r.push(e[0]),i(e[0]),o(a[0]),a=r),1===t&&2===a.length&&n(a)}t.UpdateSelection=r,t.GetSelection=function(){return a},t.SetOnSelectionItemRemoved=function(e){o=e},t.SetOnSelectionItemAdded=function(e){i=e},t.SetOnSelectionChanged=function(e){n=e,figma.on("selectionchange",(()=>{r()}))}},634:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(n(464));class a extends i.default{constructor(e,t,n){super(e,t),this._type=n}}function r(e,t){const n=new a(0,0,t),o=e.rotation*(3.14/180),i=e.absoluteTransform[0][2],r=e.absoluteTransform[1][2];return"top"===t&&(n.x=i+.5*e.width*Math.cos(o),n.y=r-.5*e.width*Math.sin(o)),"right"===t&&(n.x=i+e.width*Math.cos(o)+.5*e.height*Math.sin(o),n.y=r+.5*e.height*Math.cos(o)-e.width*Math.sin(o)),"bottom"===t&&(n.x=i+.5*e.width*Math.cos(o)+e.height*Math.sin(o),n.y=r+e.height*Math.cos(o)-.5*e.width*Math.sin(o)),"left"===t&&(n.x=i+.5*e.height*Math.sin(o),n.y=r+.5*e.height*Math.cos(o)),n}function s(e){const t=[],n=e.rotation*(3.14/180),o=e.absoluteTransform[0][2],i=e.absoluteTransform[1][2],r=Math.cos(n),s=Math.sin(n);return t.push(new a(o+.5*e.width*r,i-.5*e.width*s,"top")),t.push(new a(o+e.width*r+.5*e.height*s,i+.5*e.height*r-e.width*s,"right")),t.push(new a(o+.5*e.width*r+e.height*s,i+e.height*r-.5*e.width*s,"bottom")),t.push(new a(o+.5*e.height*s,i+.5*e.height*r,"left")),t}t.default={GetSnapPoint:r,GetSnapPointById:function(e,t){return r(e,0===t?"top":1===t?"right":2===t?"bottom":"left")},GetClosestSnapPoints:function(e,t){const n=s(e),o=[n[1],n[3]],i=[n[0],n[2]],a=s(t),r=[a[1],a[3]],l=[a[0],a[2]],c=function(e,t){const n=[null,null];let o=99999999;for(let i=0;i<2;i++)for(let a=0;a<2;a++){const r=e[i].dist(t[a]);r<o&&(n[0]=e[i],n[1]=t[a],o=r)}return[o,n]},u=c(o,r),f=Math.abs(u[1][0].x-u[1][1].x),d=Math.abs(u[1][0].y-u[1][1].y),h=u[1][0].dist(u[1][1]),g=c(i,l),p=Math.abs(g[1][0].x-g[1][1].x),m=Math.abs(g[1][0].y-g[1][1].y),b=g[1][0].dist(g[1][1]),v=(Math.abs(g[1][0].x-u[1][1].x),Math.abs(g[1][0].y-u[1][1].y),g[1][0].dist(u[1][1]));let w=9999999;if(h<w&&(w=h),b<w&&(w=b),v<w&&(w=v),1.5*f>d){const e=u[1][0],t=u[1][1];if("right"===e._type?e.x<t.x:e.x>t.x)return[u[1][0],u[1][1]]}return 2*m>p?[g[1][0],g[1][1]]:[u[1][0],g[1][1]]}}},464:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t){this.x=e,this.y=t}dist(e){const t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)}}}},t={};!function n(o){var i=t[o];if(void 0!==i)return i.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}(480)})();